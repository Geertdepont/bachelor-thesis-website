<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Access (and cache) the data provided by Models via app-scoped dedicated components. - Guidelines for Architecting Android Apps</title>

  <link rel="shortcut icon" href="/styles/images/favicon.png">
  <link rel="icon" href="/styles/images/favicon.png">

  <link rel="stylesheet" href="/styles/css/index.css">
  <link rel="stylesheet" href="/styles/css/fontawesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/styles/css/syntax.css">
  <link rel="canonical" href="/mvp/mvp-18/">
  <link rel="alternate" type="application/rss+xml" title="Guidelines for Architecting Android Apps" href="/feed.xml">
  
  <meta name="keywords" content="Access (and cache) the data provided by Models via app-scoped dedicated components., Guidelines for Architecting Android Apps, ">
  <meta name="description" content="">

  <script src="/styles/js/jquery.min.js"></script>
  <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <style type="text/css">
      .docs-content{
        margin-bottom: 10px;
      }
    </style>
</head>

  <body class="index">

    <header class="navbar navbar-inverse navbar-fixed-top docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">    
        <li>
          <a href="/">Home</a>
        </li>
        <li>
          <a href="/credits/credits">Credits</a>
        </li>
      </ul>
    </nav>
  </div>
</header>
    <!--<div class="docs-header" id="content">-->
  <!--&lt;!&ndash;<div class="container">&ndash;&gt;-->
  	<!--&lt;!&ndash;&ndash;&gt;-->
    <!--&lt;!&ndash;&ndash;&gt;-->
  <!--&lt;!&ndash;</div>&ndash;&gt;-->
<!--</div>-->
    
      
<div class="banner">
  <div class="container">
  	
    	<a href="/MVP/">MVP</a>	/
    
  </div>
</div>

    

    
<div class="container docs-container">
  <div class="row">
    <div class="col-md-3">
      <div class="sidebarpost hidden-print" role="complementary">
        <div id="navigation">
  <h1>MVP</h1>
  <div style="height: 200px;width: 200px;">
    <ul class="nav sidenav">
      
      
      <li><a href="/mvp/mvp-16/"><b>Guideline 16:</b> Provide views with data</a></li>
      
      <li><a href="/mvp/mvp-17/"><b>Guideline 17:</b> Presenters should be Android- and framework-independent.</a></li>
      
      <li><a href="/mvp/mvp-18/"><b>Guideline 18:</b> Data provided by Models via app-scoped dedicated components.</a></li>
      
      <li><a href="/mvp/mvp-19/"><b>Guideline 19:</b> Clearly define contracts between Views and Presenters.</a></li>
      
      <li><a href="/mvp/mvp-20/"><b>Guideline 20:</b> Lifecycle of Presenters</a></li>
      
      <li><a href="/mvp/mvp-21/"><b>Guideline 21:</b> Avoid too many responsibilities in the Presenters</a></li>
      
      <li><a href="/mvp/mvp-22/"><b>Guideline 22:</b> Make Presenters dependent on Views</a></li>
      
      <li><a href="/mvp/mvp-23/"><b>Guideline 23:</b> Views are passive</a></li>
      
      <li><a href="/mvp/mvp-24/"><b>Guideline 24:</b> Keep business logic out of activities and views.</a></li>
      
      <li><a href="/mvp/mvp-25/"><b>Guideline 25:</b> Inject dependencies to Presenters into the Views</a></li>
      
      <li><a href="/mvp/mvp-26/"><b>Guideline 26:</b> Do not let presenters communicate with each other.</a></li>
      
      <li><a href="/mvp/mvp-27/"><b>Guideline 27:</b> Retain fragments for avoiding memory leaks</a></li>
      
      
    </ul>
  </div>
</div>


      </div>
    </div>
    <div class="col-md-9" role="main">
      <div class="panel docs-content">
        <div class="wrapper">
          <header class="post-header">
            <h1 class="post-title">Access (and cache) the data provided by Models via app-scoped dedicated components.</h1>
            <br />
          </header>
          <article class="post-content">
            <h3>Why?</h3>
<p>When developing an Android app, a common issue which might
emerge is related to restoring the state of Views. This issue
can be solved by adapting slightly the architecture of apps.
Specifically a data manager component (e.g., a data store or
Jetpack Repository) can be introduced. This component is
responsible for data related tasks such as fetching data from the
network, caching results or returning already cached data. By
scoping such component at the app level and not at the one of
single Activities, issues relative to restoring View states, e.g.,
in the occurrence of a screen orientation change, are solved
through an architecturally maintainable solution.</p>

<h3>Example</h3>
<p>We created a simple <a href="https://github.com/Geertdepont/bachelor_thesis/tree/master/Bossapplication" target="_blank">application</a> which retrieves employees from this url: http://dummy.restapiexample.com/api/v1/</p>

<p>If the employees were already retrieved within 5000 milliseconds, the repository returns the 
cache instead of making a new API request.</p>

<figure>
  <img src="/assets/BossApplication_lifecycle.png" alt="Login Injection" width="700" />
</figure>

<p>In the mainActivity when the button is clicked, the function showEmployees is called from the 
MainPresenter.</p>

<script src="https://gist.github.com/Geertdepont/64ab029fdf46c051eae227887eec24cf.js"></script>

<p>The MainPresenter then asks the repository to show the users, which it will listen to with using 
the onSuccess or onError function.</p>

<script src="https://gist.github.com/Geertdepont/e8e9996406425a39462b5f03ec0896ff.js"></script>

<p>The repository contains a EmployeeService which makes API requests and a 
EmployeeCache.</p>

<p>https://gist.github.com/Geertdepont/6ecccdffb113b1b2e581775384f4bc6c</p>

<p>When the getList() function from the Repository is called.
It checks if the cache is still valid. That is if the data was recently updated and not null.</p>

<script src="https://gist.github.com/Geertdepont/e484aa2688cac63a9284cc156da2a000.js"></script>

<p>If not, then a new listener is created. Which is used during the API request.</p>

<script src="https://gist.github.com/Geertdepont/6ecccdffb113b1b2e581775384f4bc6c.js"></script>

<p>This results in a faster response. If this data was stored in the MainActivity and
this activity would be destroyed, the data would be lost. 
To retrieve the data again a new request would have to be performed, which results in a bad user experience.</p>

<p>Check out the <a href="https://github.com/Geertdepont/bachelor_thesis/tree/master/Bossapplication" target="_blank">Github page</a> to view the complete repository.</p>

<p>&lt;a href=”https://github.com/Geertdepont/bachelor_thesis/tree/master/Bossapplication” target=”_blank”target=”_blank”&gt;<button type="button" class="btn btn-primary btn-icon-right">Go to the github page</button>&lt;/a&gt;</p>


          </article>
        </div>
      </div>
    </div>
  </div>
</div>



    
    <footer class="footer" role="contentinfo">
	<div class="container">
		<p class="copyright">Copyright &copy; 2019 <a href=""><code>Geert de Pont</code></a>.</p>
		<img src="/assets/vuamsterdam.svg" alt="Vrije Universiteit Amsterdam" width="220px;">
		<img src="/assets/gssi.jpg" alt="GSSI" width="220px;">
	</div>
</footer>

<script src="/styles/js/jquery.min.js"></script>
<script src="/styles/js/bootstrap.min.js"></script>
<script src="/styles/js/holder.min.js"></script>
<script src="/styles/js/navigation.js"></script>
<script src="/styles/js/application.js"></script>

  </body>
</html>

